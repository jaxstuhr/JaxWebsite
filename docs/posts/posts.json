[
  {
    "path": "posts/2022-02-23-dsproject/",
    "title": "Palmetto binary logistic regression",
    "description": "A short description of the post.",
    "author": [
      {
        "name": "Jaxon Stuhr",
        "url": {}
      }
    ],
    "date": "2022-02-23",
    "categories": [],
    "contents": "\r\n\r\n\r\n\r\nOverview\r\nThis document examines Florida palmetto data from the Archbold Biological Station in south-central Florida. Observations occurred between 1981 and 2017. Below, relevant data is visualized and two binary logistic regression models are developed to predict the species of an observed plant based on characteristics found in the data. The model performance is compared, a superior model is selected, and the results and predictive capacity of this model are displayed.\r\nData Visualization\r\n\r\n\r\n# read in data\r\npalmetto_raw = read_csv(here(\"data\", \"palmetto.csv\"))\r\n# species: 1 = Serenoa repens, 2 = Sabal etonia to start\r\npalmetto = palmetto_raw %>%\r\n  # select applicable variables\r\n  select(species, height:green_lvs) %>% \r\n  # relabel species\r\n  mutate(species = case_when(\r\n    species == 1 ~ \"Serenoa repens\",\r\n    species == 2 ~ \"Sabal etonia\"\r\n  )) %>% \r\n  # make species a factor\r\n  mutate(species = factor(species)) %>% \r\n  na.omit()\r\n# Sabal etonia = 0, serenoa repens = 1\r\n# class(palmetto$species)\r\n# levels(palmetto$species) \r\n# Sabal and serenoa subsets\r\nsabal = palmetto %>% \r\n  filter(species == \"Sabal etonia\")  \r\nserenoa = palmetto %>% \r\n  filter(species == \"Serenoa repens\") \r\n\r\n\r\n\r\n\r\n\r\n# Data Viz\r\nplot1 = ggplot(palmetto, aes(x = species, y = height, color = species)) +\r\n  geom_jitter() +\r\n  theme_minimal() + \r\n  labs(x = \"Species\", y = \"Height [cm]\") +\r\n  theme(axis.text.x = element_text(angle = 30)) +\r\n  theme(legend.position=\"none\")\r\n\r\nplot2 = ggplot(palmetto, aes(x = species, y = green_lvs, color = species)) +\r\n  geom_jitter() +\r\n  theme_minimal() + \r\n  labs(x = \"Species\", y = \"Green Leaf Counts\") +\r\n  theme(axis.text.x = element_text(angle = 30)) +\r\n  theme(legend.position=\"none\")\r\n\r\nplot3 = ggplot(palmetto, aes(x = width, y = length, color = species)) +\r\n  geom_point() +\r\n  facet_wrap(~species) +\r\n  theme_minimal() + \r\n  labs(x = \"Width [cm]\", y = \"Length [cm]\") +\r\n  theme(axis.text.x = element_text(angle = 30)) +\r\n  theme(legend.position=\"none\")\r\n\r\n# Combine plots in figure\r\nplot_grid(plot1, plot2, plot3, labels = c('A', 'B', 'C'), label_size = 12)\r\n\r\n\r\n\r\n\r\nFigure 1: Exploring the predictive capacity of canopy height (A), width (C), length(C), and number of green leaves (B), on plant species (Sabal etonia or Serenoa repens) for south-central Florida palmetto data collected between 1981 and 2017\r\nBased on the exploratory plots above, I expect green leaf counts and measured length to have significant predictive capacity, based on the increased leaf counts for Serenoa repens (mean count = 7.5 vs 4.02) and greater lengths for Sabal etonia (mean length = 143.35 [cm] vs 120.07 [cm]). Width and height will likely have less predictive capacity.\r\nBinary Logistic Regression: Model Comparison and Training\r\n\r\n\r\n# build functions and models\r\nf1 <- species ~ height + length + width + green_lvs\r\n\r\nregression1 <- glm(formula = f1,\r\n                    data = palmetto,\r\n                    family = \"binomial\")\r\n\r\nf2 <- species ~ height + width + green_lvs\r\n \r\nregression2 <- glm(formula = f2,\r\n                    data = palmetto,\r\n                    family = \"binomial\")\r\n\r\n\r\n\r\n\r\n\r\n# AICc comparison of models\r\n# AICcmodavg::aictab(list(regression1, regression2))\r\n\r\n\r\n\r\n\r\n\r\n# 10-fold cross validation of models\r\nset.seed(57) \r\n# tr_ctrl <- trainControl(method = \"cv\", number = 10)\r\ntr_ctrl <- trainControl(method = \"repeatedcv\", number = 10, repeats = 10)\r\n \r\n# Train the model\r\nmodel1 <- train(f1, data = palmetto, \r\n               method = \"glm\", family = 'binomial',\r\n               trControl = tr_ctrl)\r\n# model1\r\n \r\nmodel2 <- train(f2, data = palmetto, \r\n               method = \"glm\", family = 'binomial',\r\n               trControl = tr_ctrl)\r\n# model2\r\n\r\n\r\n\r\nBased on both AIC scores and 10-fold cross validation, Model 1 which predicts species as a function of canopy length, height, weight, and leaf counts, outperformed Model 2, which excluded canopy length. This is not surprising as canopy length was expected to have significant predictive capacity. The final model is expressed below:\r\n\\[\r\n\\begin{aligned}\r\n\\log\\left[ \\frac { \\widehat{P( \\operatorname{species} = \\operatorname{Serenoa\\ repens} )} }{ 1 - \\widehat{P( \\operatorname{species} = \\operatorname{Serenoa\\ repens} )} } \\right] &= -3.23 + 0.03(\\operatorname{height}) - 0.05(\\operatorname{length}) - 0.04(\\operatorname{width})\\ + \\\\\r\n&\\quad 1.91(\\operatorname{green\\_lvs})\r\n\\end{aligned}\r\n\\]\r\nThe coefficients in this model align with our predictions, showing a strong relationship between leaf count and probability of a Serenoa repens, a weaker relationship between canopy length and Sabal etonia, and even weaker relationships associated with canopy width and height. A model summary table is displayed below.\r\n\r\n\r\nmodel_tidy = broom::tidy(regression1)\r\n\r\nkbl(model_tidy, caption = \"Table 1: Model Results Summary\") %>%\r\n  kable_classic(full_width = F, html_font = \"Cambria\")\r\n\r\n\r\n\r\nTable 1: Table 1: Model Results Summary\r\n\r\n\r\nterm\r\n\r\n\r\nestimate\r\n\r\n\r\nstd.error\r\n\r\n\r\nstatistic\r\n\r\n\r\np.value\r\n\r\n\r\n(Intercept)\r\n\r\n\r\n-3.2266851\r\n\r\n\r\n0.1420708\r\n\r\n\r\n-22.71180\r\n\r\n\r\n0\r\n\r\n\r\nheight\r\n\r\n\r\n0.0292173\r\n\r\n\r\n0.0023061\r\n\r\n\r\n12.66984\r\n\r\n\r\n0\r\n\r\n\r\nlength\r\n\r\n\r\n-0.0458233\r\n\r\n\r\n0.0018661\r\n\r\n\r\n-24.55600\r\n\r\n\r\n0\r\n\r\n\r\nwidth\r\n\r\n\r\n-0.0394434\r\n\r\n\r\n0.0021000\r\n\r\n\r\n-18.78227\r\n\r\n\r\n0\r\n\r\n\r\ngreen_lvs\r\n\r\n\r\n1.9084747\r\n\r\n\r\n0.0388634\r\n\r\n\r\n49.10728\r\n\r\n\r\n0\r\n\r\n\r\nBinary Logistic Regression: Model Performance\r\n\r\n\r\n# use broom::augment to add predicted species to table\r\nmodel_fitted = regression1 %>%\r\n  broom::augment(type.predict = \"response\") %>% \r\n  # add predicted species column\r\n  mutate(\"classification\" = case_when(\r\n    .fitted < .5 ~ \"Sabal etonia\", \r\n    .fitted > .5 ~ \"Serenoa repens\" \r\n  )) %>% \r\n  # add correctly classified column\r\n  mutate(\"correct_classification\" = case_when(\r\n    species == classification ~ \"Yes\", \r\n    species != classification ~ \"No\"\r\n  ))\r\n\r\n\r\n\r\n\r\n\r\n# build prediction table with counts and percents\r\nprediction_table = model_fitted %>% \r\n  tabyl(species, correct_classification) %>% \r\n  adorn_percentages() %>% \r\n  adorn_pct_formatting(digits = 2) %>% \r\n  adorn_ns()\r\n\r\n# display prediction table \r\nkable(prediction_table, \r\n      col.names = c(\"Species\", \"Incorrectly Classified (%, Count)\", \"Correctly Classified (%, Count)\"),\r\n      caption = \"Table 2: Predictive Performance of Binomial Regression Model, Classification Accurace by Species\") %>%\r\n  kable_classic(full_width = F, html_font = \"Cambria\")\r\n\r\n\r\n\r\nTable 2: Table 2: Predictive Performance of Binomial Regression Model, Classification Accurace by Species\r\n\r\n\r\nSpecies\r\n\r\n\r\nIncorrectly Classified (%, Count)\r\n\r\n\r\nCorrectly Classified (%, Count)\r\n\r\n\r\nSabal etonia\r\n\r\n\r\n7.38% (454)\r\n\r\n\r\n92.62% (5701)\r\n\r\n\r\nSerenoa repens\r\n\r\n\r\n9.23% (564)\r\n\r\n\r\n90.77% (5548)\r\n\r\n\r\nThe model performed well, classifying both species correctly with over 90% accuracy. The model predicted the species of 12,267 observed plants, and accurately classified 11,249 based on canopy height, width, length, and leaf counts.\r\nData Citation\r\nAbrahamson, W.G. 2019. Survival, growth and biomass estimates of two dominant palmetto species of south-central Florida from 1981 - 2017, ongoing at 5-year intervals ver 1. Environmental Data Initiative. https://doi.org/10.6073/pasta/f2f96ec76fbbd4b9db431c79a770c4d5\r\n\r\n\r\n\r\n",
    "preview": "posts/2022-02-23-dsproject/dsproject_files/figure-html5/unnamed-chunk-2-1.png",
    "last_modified": "2022-02-23T10:36:55-08:00",
    "input_file": {}
  },
  {
    "path": "posts/2022-01-22-welcome/",
    "title": "My first blog post",
    "description": "I made my own website. Yeehaw!",
    "author": [
      {
        "name": "Jaxon",
        "url": {}
      }
    ],
    "date": "2022-01-22",
    "categories": [],
    "contents": "\r\nHopefully there will be more grad school content than climbing content, but I guess we’ll just have to wait and see…\r\n\r\n\r\n\r\n",
    "preview": {},
    "last_modified": "2022-01-22T12:09:53-08:00",
    "input_file": {}
  }
]
